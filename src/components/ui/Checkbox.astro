---
import type { HTMLAttributes } from 'astro/types'

type Variants = 'primary' | 'secondary' | 'error' | 'light' | 'dark' | 'success'
type Sizes = 'xs' | 'sm' | 'md' | 'lg' | 'xl'
interface Props extends HTMLAttributes<'input'> {
  id?: string
  name?: string
  value?: string
  disabled?: boolean
  checked?: boolean
  size?: Sizes
  variant?: Variants
  light?: boolean
}

const {
  id,
  name,
  value,
  disabled,
  checked,
  variant = 'primary',
  size = 'md',
  light = false,
  ...attrs
} = Astro.props
---

<input
  type='checkbox'
  id={id}
  checked={checked}
  disabled={disabled}
  name={name}
  value={value}
  class:list={[
    'astroui-checkbox',
    size && `astroui-checkbox-${size}`,
    variant && `astroui-checkbox-${variant}`,
    light && 'astroui-checkbox-light',
    disabled && 'disabled'
  ]}
  {...attrs}
/>

<style>
  .astroui-checkbox {
    @apply relative flex-none cursor-pointer rounded-sm border-[2px] border-solid border-primary outline-none focus:shadow-none focus:transition-[border-color_0.2s] appearance-none checked:focus:after:rounded-none focus:after:rounded-[2px];
  }
  .astroui-checkbox:hover:before{
    @apply opacity-[0.04] shadow-[0px_0px_0px_13px_rgba(0,0,0,0.1)];
  }
  .astroui-checkbox:before{
    @apply pointer-events-none absolute scale-0 bg-transparent opacity-0 shadow-[0px_0px_0px_13px_transparent] content-[''] rounded-full border-[8px] border-solid border-transparent -translate-x-1/2 -translate-y-1/2 z-[0];
  }
  .astroui-checkbox:after, .astroui-checkbox:focus:after{
    @apply absolute z-[1] block content-[''];
  }
  .astroui-checkbox:focus:before {
    @apply left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 scale-100 opacity-95 transition-[box-shadow_0.2s,transform_0.2s];
  }
  .astroui-checkbox:checked{
    @apply border-primary bg-primary;
  }
  .astroui-checkbox:checked:after{
    @apply border-white;
  }
  .astroui-checkbox:checked:before{
    @apply bg-opacity-90;
  }

  /* Checkbox xs */
  .astroui-checkbox.astroui-checkbox-xs {
    @apply h-[14px] w-[14px] border-[2px];
  }
  .astroui-checkbox.astroui-checkbox-xs:before{
    @apply border-[6px];
  }
  .astroui-checkbox.astroui-checkbox-xs:checked:focus:after,
  .astroui-checkbox.astroui-checkbox-xs:checked:after{
    @apply h-[10px] w-[4px];
  }
  .astroui-checkbox.astroui-checkbox-xs:focus:before,
  .astroui-checkbox.astroui-checkbox-xs:checked:focus:before {
    @apply shadow-[0px_0px_0px_10px_#00000017];
  }
  .astroui-checkbox.astroui-checkbox-xs:checked:after{
    @apply absolute border-l-0 border-[1px] border-t-0 border-solid rotate-45  bg-transparent top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 border-b-[2px] border-r-[2px] -mt-[1px];
  }

  /* Checkbox sm */
  .astroui-checkbox.astroui-checkbox-sm {
    @apply h-[16px] w-[16px];
  }
  .astroui-checkbox.astroui-checkbox-sm:before{
    @apply border-[7px];
  }
  .astroui-checkbox.astroui-checkbox-sm:checked:focus:after,
  .astroui-checkbox.astroui-checkbox-sm:checked:after{
    @apply h-[11px] w-[5px];
  }
  .astroui-checkbox.astroui-checkbox-sm:focus:before,
  .astroui-checkbox.astroui-checkbox-sm:checked:focus:before {
    @apply shadow-[0px_0px_0px_10px_#00000017];
  }
  .astroui-checkbox.astroui-checkbox-sm:checked:after{
    @apply absolute border-l-0 border-[1px] border-t-0 border-solid rotate-45 bg-transparent top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 border-b-[2px] border-r-[2px] -mt-[1px];
  }

  /* Checkbox md */
  .astroui-checkbox.astroui-checkbox-md {
    @apply h-[18px] w-[18px];
  }
  .astroui-checkbox.astroui-checkbox-md:before{
    @apply border-[8px];
  }
  .astroui-checkbox.astroui-checkbox-md:checked:focus:after,
  .astroui-checkbox.astroui-checkbox-md:checked:after{
    @apply h-[13px] w-[5px];
  }
  .astroui-checkbox.astroui-checkbox-md:focus:before,
  .astroui-checkbox.astroui-checkbox-md:checked:focus:before {
    @apply shadow-[0px_0px_0px_13px_#00000017];
  }
  .astroui-checkbox.astroui-checkbox-md:checked:after{
    @apply absolute border-l-0 border-t-0 border-solid rotate-45 bg-transparent top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 border-b-[2px] border-r-[2px] -mt-[1px];
  }

  /* Checkbox lg */
  .astroui-checkbox.astroui-checkbox-lg {
    @apply h-[22px] w-[22px] border-[3px];
  }
  .astroui-checkbox.astroui-checkbox-lg:before{
    @apply border-[12px];
  }
  .astroui-checkbox.astroui-checkbox-lg:checked:focus:after,
  .astroui-checkbox.astroui-checkbox-lg:checked:after{
    @apply h-[16px] w-[7px];
  }
  .astroui-checkbox.astroui-checkbox-lg:focus:before,
  .astroui-checkbox.astroui-checkbox-lg:checked:focus:before {
    @apply shadow-[0px_0px_0px_12px_#00000017];
  }
  .astroui-checkbox.astroui-checkbox-lg:checked:after{
    @apply absolute border-l-0 border-[2px] border-t-0 border-solid rotate-45 bg-transparent top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 border-b-[3px] border-r-[3px] -mt-[2px];
  }

  /* Checkbox xl */
  .astroui-checkbox.astroui-checkbox-xl {
    @apply h-[26px] w-[26px] border-[3px];
  }
  .astroui-checkbox.astroui-checkbox-xl:before{
    @apply border-[14px];
  }
  .astroui-checkbox.astroui-checkbox-xl:checked:focus:after,
  .astroui-checkbox.astroui-checkbox-xl:checked:after{
    @apply h-[20px] w-[8px];
  }
  .astroui-checkbox.astroui-checkbox-xl:focus:before,
  .astroui-checkbox.astroui-checkbox-xl:checked:focus:before {
    @apply shadow-[0px_0px_0px_12px_#00000017];
  }
  .astroui-checkbox.astroui-checkbox-xl:checked:after{
    @apply absolute border-l-0 border-[2px] border-t-0 border-solid rotate-45 bg-transparent top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 border-b-[3px] border-r-[3px] -mt-[2px];
  }

  /** Variants */

  /* Checkbox primary */
  .astroui-checkbox.astroui-checkbox-primary {
    @apply border-primary;
  }
  .astroui-checkbox.astroui-checkbox-primary:checked{
    @apply border-primary bg-primary;
  }

  /* Checkbox secondary */
  .astroui-checkbox.astroui-checkbox-secondary {
    @apply border-gray-500;
  }
  .astroui-checkbox.astroui-checkbox-secondary:checked{
    @apply border-gray-500 bg-gray-500;
  }

  /* Checkbox error */
  .astroui-checkbox.astroui-checkbox-error {
    @apply border-error;
  }
  .astroui-checkbox.astroui-checkbox-error:checked{
    @apply border-error bg-error;
  }

  /* Checkbox success */
  .astroui-checkbox.astroui-checkbox-success {
    @apply border-success;
  }
  .astroui-checkbox.astroui-checkbox-success:checked{
    @apply border-success bg-success;
  }

  /** light **/

  .astroui-checkbox.astroui-checkbox-light {
    @apply border-white;
  }
  .astroui-checkbox.astroui-checkbox-light:checked{
    @apply border-white bg-white;
  }
  .astroui-checkbox.astroui-checkbox-light:checked:after{
    @apply border-black;
  }
  .astroui-checkbox.astroui-checkbox-light.astroui-checkbox-xs:focus:before, .astroui-checkbox.astroui-checkbox-light.astroui-checkbox-xs:checked:focus:before {
    @apply shadow-[0px_0px_0px_10px_#ffffff37];
  }
  .astroui-checkbox.astroui-checkbox-light.astroui-checkbox-sm:focus:before, .astroui-checkbox.astroui-checkbox-light.astroui-checkbox-sm:checked:focus:before {
    @apply shadow-[0px_0px_0px_10px_#ffffff37];
  }
  .astroui-checkbox.astroui-checkbox-light.astroui-checkbox-md:focus:before, .astroui-checkbox.astroui-checkbox-light.astroui-checkbox-md:checked:focus:before {
    @apply shadow-[0px_0px_0px_12px_#ffffff37];
  }
  .astroui-checkbox.astroui-checkbox-light.astroui-checkbox-xl:focus:before, .astroui-checkbox.astroui-checkbox-light.astroui-checkbox-xl:checked:focus:before {
    @apply shadow-[0px_0px_0px_12px_#ffffff37];
  }

  /** Dark */

  .astroui-checkbox.astroui-checkbox-dark {
    @apply border-black;
  }
  .astroui-checkbox.astroui-checkbox-dark:checked{
    @apply border-black bg-black;
  }

  /** Checkbox disabled */
  .astroui-checkbox:disabled, .astroui-checkbox[disabled], .astroui-checkbox:disabled:checked {
    @apply cursor-default opacity-30;
  }

</style>